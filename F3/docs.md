# 整数の並びの中に特定のパターンが現れる回数を数えるプログラム

このプログラムは、指定されたファイルから整数の並びを読み込み、その中から特定のパターン `[2, 5, 2, 5]` が出現する回数を数えます。

## プログラムの操作方法

1.  **プログラムの実行:**
    Python環境でこのスクリプトを実行します。

    ```bash
    python script.py
    ```

2.  **ファイル名の入力:**
    プログラムを実行すると、ファイル名の入力を求められます。

    ```
    ファイル名を入力してください (終了するには何も入力せずにEnter):
    ```

      * パターンを検索したいデータが記述されたテキストファイルの名前を入力し、Enterキーを押します。
      * プログラムを終了したい場合は、何も入力せずにEnterキーを押します。

3.  **入力ファイルの形式:**
    入力ファイルは以下の形式である必要があります。

      * 1行目：データの総行数を示す整数 `n`。
      * 2行目以降：各行に1つずつ整数が記述されています。

    **例:**

    ```
    10
    1
    2
    5
    2
    5
    3
    2
    5
    2
    5
    ```

4.  **出力:**
    プログラムは、入力ファイル内でパターン `[2, 5, 2, 5]` が出現した回数を1行で出力します。

    **例:**
    上記の入力ファイルの場合、出力は以下のようになります。

    ```
    2
    ```

    (これは、`[2, 5, 2, 5]` が2回出現するためです。)

## ユーザー定義関数の説明

### `read_numbers_from_file(filename)`

  * **関数名:** `read_numbers_from_file`
  * **引数:**
      * `filename` (str): 読み込むファイルのパスと名前。
  * **戻り値:**
      * `list`: ファイルから読み込まれた整数を格納したリスト。ファイルが見つからない、または読み込み中にエラーが発生した場合は空のリストを返します。
  * **処理内容:**
    この関数は、指定されたファイルを開き、その中から整数を読み込みます。ファイルの1行目（データ総数を表す行）はスキップされ、2行目以降の各行を整数に変換してリストに追加します。数値に変換できない行があった場合は警告メッセージを表示し、その行はスキップします。ファイルが見つからない場合はエラーメッセージを表示します。

### `count_occurrences(numbers)`

  * **関数名:** `count_occurrences`
  * **引数:**
      * `numbers` (list): 検索対象となる整数のリスト。
  * **戻り値:**
      * `int`: パターン `[2, 5, 2, 5]` が `numbers` リスト内に出現した回数。
  * **処理内容:**
    この関数は、与えられた整数のリストの中から、特定のパターン `[2, 5, 2, 5]` が連続して現れる回数を数えます。リストの各位置からパターンが一致するかを順次確認し、パターンが完全に一致した場合、出現回数を1増やします。重複する出現も個別にカウントされます (例: `[2,5,2,5,2,5]` の場合、2回とカウントされます)。

### `main()`

  * **関数名:** `main`
  * **引数:** なし
  * **戻り値:** なし
  * **処理内容:**
    この関数はプログラムのエントリーポイントであり、ファイル名の入力からパターン出現回数の出力までの一連の流れを制御します。ユーザーにファイル名の入力を繰り返し求め、入力されたファイル名が空文字列の場合、プログラムを終了します。ファイル名が入力された場合、`read_numbers_from_file` 関数を呼び出してファイルを読み込み、ファイルが正常に読み込まれた場合（空でないリストが返された場合）、`count_occurrences` 関数を呼び出してパターンの出現回数を計算し、その結果を標準出力に表示します。

## プログラムの工夫点

  * **モジュール化された設計:**
    プログラムの機能が `read_numbers_from_file` (ファイル読み込み)、`count_occurrences` (パターンカウント)、`main` (全体制御) という独立した関数に分割されています。これにより、コードの各部分の役割が明確になり、可読性が向上し、テストやメンテナンスが容易になります。
  * **堅牢なファイル処理:**
    `try-except` ブロックを使用して、ファイルが見つからない場合の `FileNotFoundError` や、ファイル内のデータが数値に変換できない場合の `ValueError` を適切に処理しています。これにより、予期せぬエラーが発生してもプログラムがクラッシュすることなく、ユーザーに適切なメッセージが表示されます。
  * **対話的なユーザーインターフェース:**
    `input()` 関数を使用してファイル名を対話的に入力させることで、ユーザーがプログラムを柔軟に操作できます。また、空の入力を受け付けることで、ユーザーが任意のタイミングでプログラムを終了できるように配慮されています。
  * **汎用的なパターン検索ロジック:**
    `count_occurrences` 関数内のパターン検索ロジックは、特定のパターン `[2, 5, 2, 5]` に特化していますが、`pattern` 変数を変更するだけで任意の整数の並びを検索できるように設計されています。`for i in range(list_len - pattern_len + 1)` の範囲指定は、リストの末尾でパターンが完全に収まるすべての可能な開始インデックスを網羅するために最適化されています。
  * **データクレンジング:**
    `line.strip()` を使用することで、ファイルから読み込まれた各行の先頭や末尾にある空白文字（改行コード `\n` を含む）を自動的に除去し、`int()` 関数での数値変換エラーを防いでいます。